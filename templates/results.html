<!-- templates/results.html -->
{% extends 'base.html' %}

{% block title %}Résultats - {{ super() }}{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card shadow animate__animated animate__fadeInUp">
            <div class="card-header bg-primary text-white">
                <h2 class="card-title mb-0">Résultats du Test</h2>
            </div>
            <div class="card-body">
                <div class="text-center mb-5">
                    <h3 class="mb-4">{{ student.full_name }}</h3>
                    <div class="level-result mb-4 animate__animated animate__zoomIn animate__delay-1s">
                        <div class="level-badge level-{{ result.level.lower() }}">
                            <span>{{ result.level }}</span>
                        </div>
                    </div>
                    <p class="lead">Votre niveau de compétence en anglais est :</p>
                    <h2 class="animate__animated animate__fadeIn animate__delay-2s">
                        {% if result.level == 'A1' %}
                        Débutant
                        {% elif result.level == 'A2' %}
                        Élémentaire
                        {% elif result.level == 'B1' %}
                        Intermédiaire
                        {% elif result.level == 'B2' %}
                        Intermédiaire avancé
                        {% elif result.level == 'C1' %}
                        Avancé
                        {% elif result.level == 'C2' %}
                        Maîtrise
                        {% endif %}
                    </h2>
                </div>
                
                <div class="result-details">
                    <div class="row mb-4">
                        <div class="col-md-6 animate__animated animate__fadeInLeft animate__delay-2s">
                            <div class="card h-100">
                                <div class="card-header bg-light">
                                    <h4 class="mb-0">Détails du Test</h4>
                                </div>
                                <div class="card-body">
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item d-flex justify-content-between">
                                            <span>Catégorie :</span>
                                            <span class="fw-bold">
                                                {% if student.category == 'adult' %}Adulte
                                                {% elif student.category == 'teenager' %}Adolescent
                                                {% else %}Enfant{% endif %}
                                            </span>
                                        </li>
                                        {% if student.category == 'adult' %}
                                        <li class="list-group-item d-flex justify-content-between">
                                            <span>Type de test :</span>
                                            <span class="fw-bold">
                                                {% if student.test_type == 'general' %}Communication Générale
                                                {% else %}Préparation aux Examens{% endif %}
                                            </span>
                                        </li>
                                        {% endif %}
                                        <li class="list-group-item d-flex justify-content-between">
                                            <span>Date du test :</span>
                                            <span class="fw-bold">{{ result.test_date.strftime('%d/%m/%Y') }}</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between">
                                            <span>Score :</span>
                                            <span class="fw-bold">{{ result.score }}</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 animate__animated animate__fadeInRight animate__delay-2s">
                            <div class="card h-100">
                                <div class="card-header bg-light">
                                    <h4 class="mb-0">Description du Niveau</h4>
                                </div>
                                <div class="card-body">
                                    <p>
                                        {% if result.level == 'A1' %}
                                        Vous pouvez comprendre et utiliser des expressions familières et quotidiennes ainsi que des énoncés très simples qui visent à satisfaire des besoins concrets.
                                        {% elif result.level == 'A2' %}
                                        Vous pouvez communiquer lors de tâches simples et habituelles ne demandant qu'un échange d'informations simple et direct sur des sujets familiers.
                                        {% elif result.level == 'B1' %}
                                        Vous pouvez comprendre les points essentiels quand un langage clair et standard est utilisé et s'il s'agit de choses familières dans le travail, à l'école, dans les loisirs, etc.
                                        {% elif result.level == 'B2' %}
                                        Vous pouvez comprendre le contenu essentiel de sujets concrets ou abstraits dans un texte complexe, y compris une discussion technique dans votre spécialité.
                                        {% elif result.level == 'C1' %}
                                        Vous pouvez comprendre une grande gamme de textes longs et exigeants, ainsi que saisir des significations implicites.
                                        {% elif result.level == 'C2' %}
                                        Vous pouvez comprendre sans effort pratiquement tout ce que vous lisez ou entendez et vous exprimer spontanément de façon très fluide et précise.
                                        {% endif %}
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="text-center mt-4 animate__animated animate__fadeIn animate__delay-3s">
                    <a href="{{ url_for('index') }}" class="btn btn-primary">Retour à l'accueil</a>
                    <button class="btn btn-outline-primary ms-2" onclick="window.print()">Imprimer les résultats</button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}